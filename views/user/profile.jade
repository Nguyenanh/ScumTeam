extends ../menu
block content
  .container.user-profile
    .row
      .col-md-4
        if user.avatar == null
          .avatar.before-upload
            span=user.firstname
            .choose_file
              span Choose File
                form#uploadForm(enctype= 'multipart/form-data' action ='/uploadphoto' method ='post')
                  input(type="file" name="userPhoto" multiple)
        else
          .avatar.after-upload
            img.img-responsive(src='/uploads/images/#{user.avatar}' style="width:250px; height:250px;") 
            .choose_file
              span Choose File
                form#uploadForm(enctype= 'multipart/form-data' action ='/uploadphoto' method ='post')
                  input(type="file" name="userPhoto" multiple)
      .col-md-8
        .alert.alert-info#description
          h1
            label Description
            a.btn.btn-warning#update-profile-des Edit
          p=user.description
    br
    .row
      div(role="tabpanel")
        ul.nav.nav-tabs(role="tablist")
          li.active(role="presentation")
            a(href="#activity" aria-controls="activity" role="tab" data-toggle="tab") Activity
          li(role="presentation")
            a(href="#profile" aria-controls="profile" role="tab" data-toggle="tab") Profile
        .tab-content
          .tab-pane.active#activity(role="tabpanel")
          .tab-pane#profile(role="tabpanel")
            .row
              .col-md-6
                form(role='form', method="post" id="form-register")
                  label UserName
                  input.form-control(type="text", name="username" value="#{user.username}", disabled) 
                  br            
                  label First Name                
                  input.form-control(type='text', name="firstname" value="#{user.firstname}") 
                  br            
                  label Last Name                  
                  input.form-control(type='text', name="lastname" value="#{user.lastname}") 
                  br            
                  label Registered Email                 
                  input.form-control(type='text',disabled value="#{user.email}")
                  input.form-control(type='hidden', name="id" disabled value="#{user._id}")                
                  br                
                  a.btn.btn-success#update-profile-detail Update Details  
              .col-md-6
                form(role='form', method="post" id="form-change-password")                                     
                  label Enter Old Password                     
                  input.form-control(type='password' name="oldpassword")  
                  br                    
                  label Enter New Password                       
                  input.form-control(type='password' id="newpassword" name="newpassword") 
                  br                      
                  label Confirm New Password                     
                  input.form-control(type='password' name="cfnewpassword")                       
                  br 
                  input.form-control(type='hidden', name="id" disabled value="#{user._id}")              
                  input.btn.btn-warning(type='submit', value='Change Password')
  #message
  if messages != ""
    .alert.alert-success.notice(role='errors')
      button.close(type='button', data-dismiss='alert', aria-label='Close')
          span(aria-hidden='true') &times; 
      strong=messages
  if errors != ""
    .alert.alert-warning.notice(role='errors')
      button.close(type='button', data-dismiss='alert', aria-label='Close')
          span(aria-hidden='true') &times; 
      strong=errors
block script
  script(src='/javascripts/profile_validate.js')
  script(src='/javascripts/ajax_profile.js')
  script(src='/javascripts/close_alert.js')